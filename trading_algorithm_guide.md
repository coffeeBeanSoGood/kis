# 🤖 신호 기반 자동매매 시스템 완벽 가이드 v3.1

**초보자를 위한 매수·매도 알고리즘 상세 설명서 (일일 리포트 기능 추가)**

---

## 📑 목차

1. [시스템 개요](#1-시스템-개요)
2. [전체 프로세스 흐름도](#2-전체-프로세스-흐름도)
3. [대상 종목 (41개)](#3-대상-종목-41개)
4. [신호 생성 시스템](#4-신호-생성-시스템)
5. [매수 알고리즘](#5-매수-알고리즘)
6. [매도 알고리즘](#6-매도-알고리즘)
7. [실전 시나리오](#7-실전-시나리오)
8. [주요 설정값](#8-주요-설정값)
9. [백그라운드 스레드 시스템](#9-백그라운드-스레드-시스템) ⭐ NEW!
10. [일일 리포트 시스템](#10-일일-리포트-시스템) ⭐ NEW!
11. [FAQ](#11-faq)

---

## 1. 시스템 개요

### 🎯 시스템 구조

```
┌─────────────────────────────────────────────────────────────┐
│                  신호 기반 자동매매 시스템 v3.1              │
└─────────────────────────────────────────────────────────────┘

┌──────────────────────┐        ┌──────────────────────┐
│  SignalMonitor_KR    │        │ Kiwoom_SignalBot     │
│  (신호 생성기)        │───────▶│  (자동매매 봇)        │
│                      │  신호   │                      │
│  • 41개 종목 분석    │  전달   │  • 매수 실행         │
│  • 5가지 지표 평가   │        │  • 매도 실행         │
│  • 점수화 (0-100점)  │        │  • 수익 관리         │
│                      │        │  • 일일 리포트 🆕     │
└──────────────────────┘        └──────────────────────┘
         ↓                               ↓
   signal_history.json      trading_positions.json
                                 performance.json 🆕
```

### ✨ 핵심 특징

- ✅ **41개 종목** 실시간 모니터링 (6개 섹터)
- ✅ **5가지 지표** 종합 분석
- ✅ **신호 검증** 시스템 (3회 중 2회 일치)
- ✅ **실시간 감지** (watchdog, 0초 지연)
- ✅ **스마트 매도** (3단계 수익 보호)
- ✅ **리스크 관리** (예산, 쿨다운, 손절)
- ✅ **🆕 일일 리포트** 자동 생성 (15:20~15:30)
- ✅ **🆕 성과 추적** (실현/미실현 분리, 역대 기록)
- ✅ **🆕 baseline 관리** (입금/출금 구분)

---

## 2. 전체 프로세스 흐름도

### 📊 전체 흐름

```
┌────────────────────────────────────────────────────────────┐
│                    1️⃣ 신호 생성 단계                        │
│                   (SignalMonitor_KR.py)                    │
└────────────────────────────────────────────────────────────┘
                            ↓
       ┌───────────────────────────────────────┐
       │ 5분마다 41개 종목 순차 분석            │
       │ • 호가 분석 (매수/매도 호가 비율)      │
       │ • 체결강도 (거래 압력)                │
       │ • 외국인/기관 (수급)                  │
       │ • 현재가/거래량 (가격 모멘텀)          │
       │ • 추세 분석 (이동평균, RSI)           │
       └───────────────────────────────────────┘
                            ↓
       ┌───────────────────────────────────────┐
       │ 점수 계산 (0-100점)                   │
       │ • 각 지표별 점수 산출                 │
       │ • 가중치 적용 (외국인 25%)            │
       │ • 신뢰도 평가 (40% 미만 제외)         │
       └───────────────────────────────────────┘
                            ↓
       ┌───────────────────────────────────────┐
       │ 신호 등급 결정                        │
       │ • 75점 이상: STRONG_BUY 🔥           │
       │ • 60-74점: BUY 📈                    │
       │ • 40-59점: HOLD ⏸️                   │
       │ • 25-39점: SELL ⚠️                  │
       │ • 24점 이하: STRONG_SELL 🚨         │
       └───────────────────────────────────────┘
                            ↓
       ┌───────────────────────────────────────┐
       │ 신호 검증                             │
       │ • 안정성: 최근 3회 중 2회 일치        │
       │ • 시장 필터: 급락 시 경고             │
       │ • 중복 제거: 같은 신호 반복 차단      │
       └───────────────────────────────────────┘
                            ↓
       ┌───────────────────────────────────────┐
       │ signal_history.json 저장               │
       │ [{종목코드, 신호, 점수, 시간, ...}]    │
       └───────────────────────────────────────┘

┌────────────────────────────────────────────────────────────┐
│                    2️⃣ 매매 실행 단계                        │
│                  (Kiwoom_SignalTradingBot.py)              │
└────────────────────────────────────────────────────────────┘
                            ↓
       ┌───────────────────────────────────────┐
       │ watchdog가 파일 변경 즉시 감지         │
       │ • 0.5초 대기 (파일 쓰기 완료)         │
       │ • 신호 파일 읽기                      │
       └───────────────────────────────────────┘
                            ↓
       ┌───────────────────────────────────────┐
       │ 유효 신호 필터링                      │
       │ • 10분 이내 신호만 유효               │
       │ • 신뢰도 40% 이상                     │
       │ • STRONG_BUY 신호만 매수              │
       └───────────────────────────────────────┘
                            ↓
            ┌──────────────────────┐
            │  매수 신호 있음?      │
            └──────────────────────┘
                    ↓ YES              ↓ NO
       ┌──────────────────┐    ┌──────────────────┐
       │  3️⃣ 매수 실행    │    │  4️⃣ 매도 체크    │
       └──────────────────┘    └──────────────────┘
                            ↓
       ┌───────────────────────────────────────┐
       │  5️⃣ 백그라운드 스레드 (상시 작동) 🆕 │
       │                                       │
       │  Thread 1: 미체결 관리 (30초마다)     │
       │  Thread 2: 포지션 체크 (60초마다)     │
       │  Thread 3: 일일 리포트 (15:20~15:30) │
       └───────────────────────────────────────┘
```

---

## 3. 대상 종목 (41개)

### 📊 섹터별 종목 구성

#### 🔋 2차전지 섹터 (8종목)

| 종목명 | 코드 | 특징 | 비고 |
|--------|------|------|------|
| 에코프로 | 086520 | 양극재 1위 | 고변동성 |
| POSCO홀딩스 | 005490 | 소재 대형주 | 안정적 |
| 삼성SDI | 006400 | 배터리 2위 | 대형주 |
| LG에너지솔루션 | 373220 | 배터리 1위 | 대형주 |
| 엔켐 | 348370 | 2차전지 소재 | 중형주 |
| 대주전자재료 | 078600 | 전해액 | 중소형주 |
| TIGER 2차전지소재Fn | 305720 | ETF | 분산투자 |
| 성일하이텍 | 365340 | 배터리 장비 | 중소형주 |

#### 🔥 LNG 섹터 (2종목)

| 종목명 | 코드 | 특징 |
|--------|------|------|
| 동성화인텍 | 033500 | LNG 운반선 |
| 한국카본 | 017960 | 탄소섬유 |

#### 🚢 조선 섹터 (2종목)

| 종목명 | 코드 | 특징 |
|--------|------|------|
| 한화오션 | 042660 | 조선 1위 |
| 삼성중공업 | 010140 | 조선 2위 |

#### ⚡ 원전 섹터 (6종목)

| 종목명 | 코드 | 특징 |
|--------|------|------|
| 우진 | 105840 | 원전 기자재 |
| 우진엔텍 | 041960 | 원전 부품 |
| 일진파워 | 094820 | 전력 기자재 |
| 두산에너빌리티 | 034020 | 원전 대형주 |
| 현대건설 | 000720 | 원전 건설 |
| 한전KPS | 051600 | 원전 유지보수 |

#### 🚀 방산 섹터 (6종목)

| 종목명 | 코드 | 특징 |
|--------|------|------|
| 한화시스템 | 272210 | 방산 전자 |
| 현대로템 | 064350 | 장갑차 |
| LIG넥스원 | 079550 | 유도무기 |
| PLUS K방산 | 281990 | 방산 ETF |
| 한국항공우주 | 047810 | 항공기 |
| 풍산 | 103140 | 방산 소재 |

#### 🤖 로봇 섹터 (8종목)

| 종목명 | 코드 | 특징 |
|--------|------|------|
| 원익홀딩스 | 030530 | 반도체 장비 |
| 에스피지 | 058610 | 디스플레이 |
| 클로봇 | 182690 | 자율주행 |
| 로보티즈 | 108490 | 교육 로봇 |
| 두산로보틱스 | 454910 | 협동로봇 |
| 케이엔알시스템 | 399720 | 로봇 부품 |
| 씨메스 | 140860 | 반도체 검사 |
| 유진로봇 | 056080 | 협동로봇 선두 |

#### 💾 반도체 섹터 (9종목)

| 종목명 | 코드 | 특징 |
|--------|------|------|
| 삼성전자 | 005930 | 메모리 1위 |
| SK하이닉스 | 000660 | 메모리 2위 |
| DB하이텍 | 000990 | 파운드리 |
| 유진테크 | 084370 | 반도체 장비 |
| 원익IPS | 240810 | 반도체 장비 |
| 테스 | 095610 | 반도체 검사 |
| 에스엔유 | 046890 | 반도체 부품 |
| SFA반도체 | 036540 | 반도체 소재 |
| 솔브레인 | 357780 | 반도체 소재 |

---

## 4. 신호 생성 시스템

### 📈 5가지 분석 지표

SignalMonitor_KR.py에서 자동 생성합니다.

자세한 내용은 [signal_monitor_guide.md](signal_monitor_guide.md) 참조

---

## 5. 매수 알고리즘

### 🎯 매수 프로세스

#### Step 1: 신호 수신 (Watchdog 실시간 감지)

```python
# watchdog가 signal_history.json 변경 감지
# → 0.5초 대기 (파일 쓰기 완료)
# → 파일 읽기 → 신호 처리
```

#### Step 2: 유효 신호 필터링

```python
필터 조건:
1. 시간: 10분 이내 신호만 유효
2. 신뢰도: 40% 이상
3. 신호 타입: STRONG_BUY만 (설정 가능)
```

#### Step 3: 매수 가능 여부 체크

```python
체크 항목:
1️⃣ 이미 보유 중? → ❌ 스킵
2️⃣ 쿨다운 중? (8시간) → ❌ 스킵
3️⃣ 최대 종목 수 도달? (3개) → ❌ 스킵
4️⃣ 최소 자산 미달? (40만원 이하) → ❌ 스킵
```

#### Step 4: 🆕 동적 예산 배분

```python
# 🔥 이전 방식 (고정 예산)
daily_budget = 500,000원
종목당 예산 = 500,000 / 3 = 166,666원

# 🔥 현재 방식 (동적 예산) - v3.1
총 자산 = 현금 + 보유주 + 미체결
남은 슬롯 = 3 - (보유종목 + 미체결주문)
종목당 예산 = 총 자산 / 남은 슬롯

예시:
총 자산: 600,000원
보유 종목: 1개
미체결: 0개
남은 슬롯: 3 - 1 = 2
종목당 예산: 600,000 / 2 = 300,000원 ✅
```

#### Step 5: 매수 주문 실행

```python
1. 현재가 조회
2. 호가 단위 조정 (유리하게 내림)
3. 매수 수량 계산
4. 지정가 매수 주문
5. pending_orders.json 등록
6. Discord 알림
```

---

## 6. 매도 알고리즘

### 🎯 3단계 수익 보호 시스템

#### 📊 구간별 전략

```
수익률 구간에 따른 단계별 보호:

┌─────────────────────────────────────────┐
│  -3%   │  0%  │  +2%  │  +3%  │  +5%  │
└─────────────────────────────────────────┘
    🚨      ⏸️     🛡️      🎯      🔥
  긴급손절  대기  본전보호  타이트  목표
```

#### 1️⃣ 일반 구간 (0% ~ +2%)

**상태:** 대기 모드  
**트레일링:** -1% (일반)

#### 2️⃣ 본전 보호 구간 (+2% ~ +3%)

**상태:** 🛡️ 본전 보호 활성화  
**트레일링:** 진입가 고정

#### 3️⃣ 타이트 트레일링 구간 (+3% 이상)

**상태:** 🎯 타이트 트레일링 활성화  
**트레일링:** -0.5% (매우 촘촘)

### 🎯 매도 조건 (우선순위 순)

```
1️⃣ 목표 수익 달성 (+3%) → 즉시 매도
2️⃣ 트레일링 스탑 발동 → 즉시 매도
3️⃣ 손절 신호 (SELL/STRONG_SELL) → 즉시 매도
4️⃣ 긴급 손절 (-3%) → 즉시 매도
```

### 💸 매도 후 처리

```python
1. positions.json 삭제
2. cooldowns.json 등록 (8시간)
3. 🆕 성과 기록 업데이트
   - total_realized_profit/loss
   - net_realized_profit
   - winning_trades / losing_trades
   - win_rate 자동 계산
4. 🆕 역대 기록 갱신 확인
5. Discord 알림
```

---

## 8. 주요 설정값

### ⚙️ signal_trading_config.json

#### 📌 기본 설정

```json
{
  "bot_name": "SignalTradingBot_Kiwoom_v3.1",
  "use_discord_alert": true
}
```

#### 💰 자산 관리

```json
{
  "min_asset_threshold": 400000,  // 최소 자산 (이하 시 매매 중지)
  "max_positions": 3              // 최대 보유 종목 수
}
```

#### 📈 매수 설정

```json
{
  "buy_signals": ["STRONG_BUY"],
  "signal_validity_minutes": 10,   // 신호 유효 시간
  "min_signal_confidence": 0.4     // 최소 신뢰도 40%
}
```

#### 📉 매도 설정

```json
{
  "target_profit_rate": 0.03,              // 목표 수익 3%
  "breakeven_protection_rate": 0.02,       // 본전 보호 2%
  "tight_trailing_threshold": 0.03,        // 타이트 트레일링 3%
  "tight_trailing_rate": 0.005,            // 타이트 트레일링 0.5%
  "trailing_stop_rate": 0.01,              // 일반 트레일링 1%
  "emergency_stop_loss": -0.03,            // 긴급 손절 -3%
  "sell_signals": ["SELL", "STRONG_SELL"]
}
```

#### 🔄 동적 손절 (ATR 기반)

```json
{
  "stop_loss_grace_period_minutes": 10,   // 매수 후 유예 시간
  "extreme_stop_loss": -0.05,             // 극단 손절 -5%
  "atr_stop_multiplier": 2.0,             // ATR 배수
  "atr_min_stop_loss": 0.02,              // ATR 최소 손절 2%
  "atr_max_stop_loss": 0.08,              // ATR 최대 손절 8%
  "signal_override_buffer": 0.02          // 신호 우선 버퍼 2%
}
```

#### ⏰ 스케줄링

```json
{
  "pending_order_timeout_minutes": 5,      // 미체결 타임아웃
  "check_pending_interval_seconds": 30,    // 미체결 체크 주기
  "check_position_interval_seconds": 60,   // 포지션 체크 주기
  "cooldown_hours": 8                      // 쿨다운 시간 8시간
}
```

#### 📊 성과 추적 (🆕 v3.1)

```json
{
  "performance": {
    // 📌 수동 관리 (입금/출금 시 사용자가 직접 수정!)
    "baseline_asset": 500000,
    "baseline_date": "2026-01-27",
    "baseline_note": "추가 입금 시 baseline_asset을 수동으로 업데이트하세요",
    
    // ✅ 자동 계산 (봇이 관리)
    "total_realized_profit": 0,          // 실현 수익 누적
    "total_realized_loss": 0,            // 실현 손실 누적
    "net_realized_profit": 0,            // 순 실현 수익
    
    // 📊 거래 통계
    "total_trades": 0,
    "winning_trades": 0,
    "losing_trades": 0,
    "canceled_orders": 0,
    "win_rate": 0.0,                     // 승률 (자동 계산)
    
    // 🏆 최고/최저 기록 (자동 업데이트)
    "best_performance_rate": 0.0,
    "best_performance_date": "",
    "worst_performance_rate": 0.0,
    "worst_performance_date": "",
    
    // 📅 기타
    "start_date": "2026-01-27",
    "last_report_date": "",              // 마지막 리포트 날짜
    "last_update": "2026-01-27 09:00:00"
  }
}
```

---

## 9. 백그라운드 스레드 시스템 🆕

### 🔄 3개의 독립 스레드

```python
def start_background_threads(self):
    """백그라운드 스레드 시작"""
    
    # Thread 1: 미체결 관리
    pending_thread = threading.Thread(target=pending_checker, daemon=True)
    
    # Thread 2: 포지션 관리
    position_thread = threading.Thread(target=position_checker, daemon=True)
    
    # Thread 3: 일일 리포트 🆕
    report_thread = threading.Thread(target=daily_report_checker, daemon=True)
    
    pending_thread.start()
    position_thread.start()
    report_thread.start()
```

### 1️⃣ 미체결 관리 스레드

**실행 주기:** 30초마다  
**주요 기능:**
- 미체결 주문 체결 여부 확인
- 타임아웃 체크 (5분)
- 자동 재주문 (최대 3회)
- 시장가 전환 (3회 실패 시)

```python
def pending_checker():
    while running:
        if is_trading_time():
            check_pending_orders()
        time.sleep(30)  # 30초 대기
```

### 2️⃣ 포지션 관리 스레드

**실행 주기:** 60초마다  
**주요 기능:**
- 보유 종목 현재가 확인
- 트레일링 스탑 업데이트
- 매도 조건 체크
- 자동 매도 실행

```python
def position_checker():
    while running:
        if is_trading_time():
            check_positions_and_sell()
        time.sleep(60)  # 60초 대기
```

### 3️⃣ 일일 리포트 스레드 🆕

**실행 주기:** 1분마다 (15:20~15:30 체크)  
**주요 기능:**
- 장 마감 후 자동 리포트 생성
- 하루 1회만 전송 (중복 방지)
- Discord 자동 전송

```python
def daily_report_checker():
    report_sent_date = None
    
    while running:
        now = datetime.now()
        
        # 15:20~15:30 사이인지 확인
        if now.hour == 15 and 20 <= now.minute <= 30:
            # 오늘 아직 전송 안했으면 전송
            if report_sent_date != now.date():
                send_daily_report()
                report_sent_date = now.date()
        
        time.sleep(60)  # 1분 대기
```

---

## 10. 일일 리포트 시스템 🆕

### 📊 자동 성과 리포트

**전송 시간:** 매일 15:20~15:30 (장 마감 후)  
**전송 방식:** Discord 자동 알림  
**중복 방지:** 하루 1회만 전송

### 📋 리포트 내용

#### 1️⃣ 자산 현황

```
💰 자산 현황
• 기준 자산: 500,000원 (2026-01-27 기준)
• 현재 자산: 532,400원
• 계좌 증감: +32,400원 (+6.48%)
```

- **기준 자산 (baseline_asset)**: 입금 누적 금액 (수동 관리)
- **현재 자산**: 실시간 조회 (현금 + 보유주 + 미체결)
- **계좌 증감**: 참고용 (입금 포함)

#### 2️⃣ 실제 봇 성과 (거래 기반) 🔥

```
🎯 실제 봇 성과 (거래 기반)
• 실현 수익: +15,200원
• 미실현 수익: +17,200원
• 순 수익: +32,400원
• 수익률: +6.48%
```

- **실현 수익**: 실제로 현금화된 수익 (매도 완료)
- **미실현 수익**: 보유 종목의 평가 수익
- **순 수익**: 실현 + 미실현
- **수익률**: baseline_asset 대비 봇 수익률

#### 3️⃣ 거래 통계 (누적)

```
📈 거래 통계 (누적)
• 총 거래: 12회
• 수익 거래: 9회
• 손실 거래: 3회
• 승률: 75.0%
```

#### 4️⃣ 역대 기록 🏆

```
🏆 역대 기록
• 최고 수익률: +8.32% (2026-01-25)
• 최저 수익률: -1.23% (2026-01-23)
```

- **자동 업데이트**: 매일 리포트 생성 시 갱신
- **목표 설정**: 최고 기록 갱신 목표
- **리스크 관리**: 최저 기록 이하로 안 떨어지도록

### 🔧 함수 구조

```python
def send_daily_report(self):
    """일일 성과 리포트 발송 (장 마감 후)"""
    
    # 1. 현재 자산 조회
    asset_info = calculate_total_asset()
    
    # 2. 성과 데이터 로드
    perf = config.get('performance', {})
    baseline_asset = perf.get('baseline_asset')
    net_realized_profit = perf.get('net_realized_profit')
    
    # 3. 미실현 손익 계산
    unrealized_info = calculate_unrealized_profit()
    
    # 4. 총 수익 계산
    total_profit = net_realized_profit + unrealized_profit
    total_profit_rate = (total_profit / baseline_asset * 100)
    
    # 5. 계좌 증감
    account_change = current_asset - baseline_asset
    
    # 6. 최고/최저 기록 업데이트
    if total_profit_rate > best_rate:
        config.set('performance.best_performance_rate', total_profit_rate)
        config.set('performance.best_performance_date', datetime.now())
    
    # 7. 리포트 메시지 생성
    msg = f"📊 **일일 매매 성과 리포트**\n..."
    
    # 8. Discord 전송
    discord_alert.SendMessage(msg)
```

### 📊 미실현 손익 계산

```python
def calculate_unrealized_profit(self) -> dict:
    """미실현 손익 계산"""
    
    total_invested = 0
    current_value = 0
    
    for stock_code, position in positions.items():
        entry_price = position['entry_price']
        quantity = position['quantity']
        entry_commission = position['entry_commission']
        
        # 투자 금액
        invested = (entry_price * quantity) + entry_commission
        total_invested += invested
        
        # 현재 평가 금액
        current_price = GetStockInfo(stock_code)['CurrentPrice']
        value = current_price * quantity
        current_value += value
    
    unrealized_profit = current_value - total_invested
    unrealized_rate = (unrealized_profit / total_invested * 100)
    
    return {
        'unrealized_profit': unrealized_profit,
        'unrealized_rate': unrealized_rate,
        'total_invested': total_invested,
        'current_value': current_value
    }
```

### 💡 baseline_asset 관리 방법

#### ✅ 입금 시

```json
// 10만원 추가 입금 시
// signal_trading_config.json 수동 수정

{
  "performance": {
    "baseline_asset": 600000,  // 500,000 → 600,000
    "baseline_date": "2026-01-28",
    "baseline_note": "1월 28일 10만원 추가 입금"
  }
}

// 봇 재시작
python Kiwoom_SignalTradingBot.py
```

#### ✅ 출금 시

```json
// 20만원 출금 시

{
  "performance": {
    "baseline_asset": 380000,  // 600,000 → 380,000
    "baseline_date": "2026-02-15",
    "baseline_note": "2월 15일 20만원 출금"
  }
}
```

#### 🔥 중요: 왜 baseline을 수동으로 관리하나요?

```python
# ❌ 잘못된 계산 (baseline 미사용 시)
입금 전: 500,000원
봇 수익: +30,000원 (6%)
입금: +100,000원
현재 자산: 630,000원

잘못된 수익률 = (630,000 - 500,000) / 500,000 = 26% ❌
→ 입금 20%가 수익으로 잘못 계산됨!

# ✅ 정확한 계산 (baseline 사용 시)
입금 전 baseline: 500,000원
봇 실현 수익: +30,000원
입금 후 baseline: 600,000원 (수동 업데이트)

정확한 수익률 = 30,000 / 500,000 = 6% ✅
→ 봇의 실제 성과만 정확히 측정!
```

---

## 11. FAQ

### ❓ 자주 묻는 질문

#### Q1. 일일 리포트가 전송 안돼요!

**A:** 다음을 확인하세요:
```python
1. 봇이 15:20~15:30 사이에 실행 중인가?
2. use_discord_alert이 true인가?
3. Discord 웹훅이 정상인가?
4. 로그에 "📊 일일 리포트 시간 도달" 메시지가 있는가?
```

#### Q2. baseline_asset을 언제 수정하나요?

**A:**
```python
✅ 수정해야 하는 경우:
- 계좌에 돈을 입금했을 때
- 계좌에서 돈을 출금했을 때

❌ 수정하면 안 되는 경우:
- 봇이 수익을 냈을 때 (자동 반영됨)
- 봇이 손실을 봤을 때 (자동 반영됨)
- 보유 종목 평가액이 변했을 때
```

#### Q3. 실현 수익과 미실현 수익의 차이는?

**A:**
```python
실현 수익 (net_realized_profit):
- 매도 완료되어 실제로 현금화된 수익
- 예: 삼성전자를 50,000원에 사서 52,000원에 매도
  → 실현 수익: +2,000원

미실현 수익 (unrealized_profit):
- 아직 보유 중인 종목의 평가 수익
- 예: LG전자를 100,000원에 사서 현재가 103,000원
  → 미실현 수익: +3,000원 (매도 전까지는 확정 아님)

순 수익 (total_profit):
- 실현 + 미실현 = 전체 수익
```

#### Q4. 승률은 어떻게 계산되나요?

**A:**
```python
승률 = (수익 거래 / 총 거래) × 100

예시:
총 거래: 12회
수익 거래: 9회
손실 거래: 3회
승률 = (9 / 12) × 100 = 75%

✅ 60% 이상 권장
⚠️ 50% 이하 시 전략 재검토 필요
```

#### Q5. 역대 최고 기록을 리셋하고 싶어요

**A:**
```json
// signal_trading_config.json 직접 수정

{
  "performance": {
    "best_performance_rate": 0.0,
    "best_performance_date": "",
    "worst_performance_rate": 0.0,
    "worst_performance_date": ""
  }
}

// 봇 재시작 시 새로운 기록부터 시작
```

#### Q6. 백그라운드 스레드가 많으면 API 부하가 크지 않나요?

**A:**
```python
걱정 없습니다:

Thread 1 (미체결): 30초마다 → 분당 2회
Thread 2 (포지션): 60초마다 → 분당 1회
Thread 3 (리포트): 1분마다 (하루 10분간만) → 무시 가능

3종목 보유 시 최대:
- 미체결 체크: 3회 × 2 = 6회/분
- 포지션 체크: 3회 × 1 = 3회/분
- 합계: 9회/분 (시간당 540회)

키움 API 제한: 시간당 수천~수만 회
→ 충분히 여유 있음! ✅
```

#### Q7. 일일 리포트를 다른 시간에 받고 싶어요

**A:**
```python
# Kiwoom_SignalTradingBot.py 수정

def daily_report_checker():
    # 기존: 15:20~15:30
    if now.hour == 15 and 20 <= now.minute <= 30:
    
    # 변경: 16:00~16:10
    if now.hour == 16 and 0 <= now.minute <= 10:
```

#### Q8. 여러 봇을 동시에 운영하면 baseline_asset을 어떻게 관리하나요?

**A:**
```python
각 봇마다 독립적인 config 파일 사용:

Bot A: signal_trading_config_A.json
{
  "baseline_asset": 300000  // A봇 전용 30만원
}

Bot B: signal_trading_config_B.json
{
  "baseline_asset": 200000  // B봇 전용 20만원
}

각 봇은 자신의 baseline만 관리하면 됨!
```

#### Q9. 쿨다운 24시간이 너무 길어요

**A:**
```json
// signal_trading_config.json 수정

{
  "cooldown_hours": 8  // 24 → 8시간으로 변경
}

권장:
- 초보: 24시간 (안전)
- 중급: 12시간 (균형)
- 고급: 8시간 (공격적)
```

#### Q10. 시장 급락 시 일일 리포트가 의미 있나요?

**A:**
```python
더 중요합니다!

급락 시:
- 현재 미실현 손실 확인
- 실현 손익은 얼마나 되는지
- 역대 최저 기록과 비교
- 손절해야 할지 판단 자료

→ 냉정한 판단을 위한 객관적 데이터 제공
```

---

## 📚 추가 자료

### 🔗 관련 문서

- [신호 모니터링 시스템 가이드](signal_monitor_guide.md)
- [키움증권 API 가이드](Kiwoom_API_Helper_KR.py)
- [웹 대시보드 사용법](web_dashboard.py)

### 💡 운영 팁

#### 1. 매일 체크리스트

```
[ ] 09:00 - 봇 실행 확인
[ ] 10:00 - 첫 매수 확인
[ ] 12:00 - 중간 점검
[ ] 15:30 - 장 마감 확인
[ ] 15:25 - 일일 리포트 수신 확인 ✅
[ ] 16:00 - 성과 분석
```

#### 2. 주간 체크리스트

```
[ ] 승률 확인 (60% 이상 유지?)
[ ] 평균 수익/손실 분석
[ ] 섹터별 성과 비교
[ ] 설정 조정 필요 여부 검토
```

#### 3. 월간 체크리스트

```
[ ] 역대 최고/최저 기록 확인
[ ] 월간 수익률 계산
[ ] baseline_asset 정확성 확인
[ ] 전략 효율성 평가
[ ] 입금/출금 계획
```

---

**작성일**: 2026-01-27  
**버전**: v3.1 (일일 리포트 시스템 추가)  
**업데이트**: baseline_asset 관리, 실현/미실현 분리, 역대 기록 추적  
**작성자**: AI Trading System

---

## 🎓 학습 로드맵

### 초보자 (1주차)
1. 본 문서 정독
2. baseline_asset 개념 이해
3. 일일 리포트 읽는 법 학습
4. 소액 테스트 (10만원)

### 중급자 (2-4주차)
1. 일일 리포트 기반 성과 분석
2. 승률/수익률 추이 파악
3. 설정값 최적화
4. baseline 관리 습관화

### 고급자 (1개월 이후)
1. 역대 기록 기반 목표 설정
2. 섹터별 전략 수립
3. 멀티 봇 운영
4. 커스텀 리포트 개발

**성공을 기원합니다! 🚀**